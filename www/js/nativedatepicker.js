function pad(e){return("0"+e).slice(-2)}function getDateString(e){var t=e.getDate(),a=e.getMonth(),n=e.getFullYear(),r=LOCALIZED_MONTH_NAMES[a];return r+" "+t+", "+n}function getTimeString(e){return e.getHours()+TIME_SEPARATOR+pad(e.getMinutes())}function setDateOnField(e,t,a){var n,r=new Date(e);switch(a){case"date":n=getDateString(r);break;case"time":n=getTimeString(r);break;default:n=getDateString(r)+" "+getTimeString(r)}t.val(n)}function getISODateFromField(e){return e.data(ISO_DATA_NAME)}function setISODateOnField(e,t){var a=new Date(Date.parse(e)).toISOString();t.data(ISO_DATA_NAME,a)}function showDatePicker(e,t){var a,n=getISODateFromField(e);a=n?new Date(n):new Date;var r={date:a,mode:t,x:e.offset().left+e.outerHeight()/2,y:e.offset().top+e.outerHeight()/2};window.datePicker.show(r,function(a){setDateOnField(a,e,t),setISODateOnField(a,e),e.blur()})}function showDateTimePicker(e){var t,a=getISODateFromField(e);t=a?new Date(a):new Date;var n={date:t,mode:"date"},r=jQuery.extend(!0,{},n);r.mode="time",window.datePicker.show(n,function(t){var n=new Date(t);t=new Date,a&&(t.setMinutes(new Date(a).getMinutes()),t.setHours(new Date(a).getHours())),r.date=t,window.datePicker.show(r,function(t){t=new Date(t),n.setMinutes(t.getMinutes()),n.setHours(t.getHours()),setDateOnField(n,e,"datetime"),setISODateOnField(n,e)}),e.blur()})}DATE_SEPARATOR="-",TIME_SEPARATOR=":",LOCALIZED_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],ISO_DATA_NAME="iso";