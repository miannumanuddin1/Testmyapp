function InitializePreferences(){
	$('#tourMeviiVideo').on('click', function(){
		HideSettingsStaticPage('#pageHelp');
		HideSettingsMenu();
		PlayTourVideo();
	});

	$('#havingTrouble').on('click', function(){
		ShowHavingTroublePage();
	});

	$('#closeTrouble').on('click', function(){
		CloseTrouble();
	});

	$('.disclaimerBtn').on('click', function(){
		ShowDisclaimerPage();
	});

	$('#disclaimerCloseBtn').on('click', function() {
		CloseDisclaimer();
	});
}

function ShowDisclaimerPage(){
	var time = 500;

    $('#leftMenuHeaderText').text("Disclaimer");
    var menu = $('#pageDisclaimer');
    menu.show();
    menu.addClass('activeSetting');
    menu.transition({x: '-100%'}, 0);
    menu.transition({x: '0'}, time, 'linear');
}

function CloseDisclaimer(){  //also added to meni-menu.js at $('#settingsOverlay-close').on('click'
	var time = 300;
	$('#leftMenuHeaderText').text("Terms");
	var menu = $('#pageDisclaimer');
	menu.transition({x: '-100%'}, time);
	setTimeout(function(){
	menu.removeClass('activeSetting');
	menu.hide();
	}, time);
}

function ShowHavingTroublePage(){
	var time = 500;

    // $('#leftMenuHeaderText').text("My Preferences");
    var menu = $('#pageTrouble');
    menu.show();
    menu.addClass('activeSetting');
    menu.transition({x: '-100%'}, 0);
    menu.transition({x: '0'}, time, 'linear');
}

function CloseTrouble(){  //also added to meni-menu.js$('#settingsOverlay-close').on('click'
	var time = 300;
	// $('#leftMenuHeaderText').text("Settings");
	var menu = $('#pageTrouble');
	menu.transition({x: '-100%'}, time);
	setTimeout(function(){
	menu.removeClass('activeSetting');
	menu.hide();
	}, time);
}

function PlayTourVideo(){
	var path = "https://vimeo.com/135684985";
	var vimeo = 135684985;

	NoScroll();
	$('#videoPlayer').css('top', $('body').scrollTop());
	var iframe = $('#videoPlayer iframe');
	var url = 'http://player.vimeo.com/video/' + vimeo + '?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff&amp;autoplay=1';
	iframe.attr('src', url);
	iframe.css('height', $(window).height() + 'px');
	iframe.css('width', $(window).width() + 'px');

	$('#closeVideo').one('click', function(){
		$('#videoPlayer').fadeOut('fast', function(){
			$('#videoPlayer iframe').attr('src','');
			$('#videoPlayer').css('top', '');
			AllowScroll();
		})
	});

	$('#videoPlayer').fadeIn();

}

function SavePreferences(){
	var emailPreference = $('#alertsEmail').prop('checked');
	var phonePreference = $('#alertsPhone').prop('checked');
	// var timeZone = $('#timeZone').val();
	// var anytime = $('#routineAnytime').prop('checked');
	// var mornings = $('#routineMornings').prop('checked');
	// var afternoon = $('#routineAfternoon').prop('checked');
	// var evening = $('#routineEvening').prop('checked');
	// var dailyAlerts = parseInt($('#alertsPerDay').val());

	_user.AllowEmail = emailPreference;
	_user.AllowTexting = phonePreference;
	// _user.TimeZone = timeZone;
	// _user.ContactAnytime = anytime;
	// _user.ContactMorning = mornings;
	// _user.ContactAfternoon = afternoon;
	// _user.ContactEvening = evening;
	// _user.AlertsPerDay = dailyAlerts;

	$.ajax({
		type: "POST",
		url: config.Path + '/user/saveuser',
		data: _user
	}).done(function(data){
		// alert(JSON.stringify(data));
		if (data === null){
            HandleError("user/saveuser returned null");
            return;
        }
        ShowSuccess("Preferences saved.");
        HidePreferencesProfile();
	});
	LoadUserPreferences();
}
function LoadUserPreferences(){
	var emailSetting = _user.AllowEmail;
	var textSetting = _user.AllowTexting;
	// var timeZoneSetting = _user.TimeZone;
	// var anytime = _user.ContactAnytime;
	// var morning = _user.ContactMorning;
	// var afternoon = _user.ContactAfternoon;
	// var evening = _user.ContactEvening;
	// var dailyAlerts = _user.AlertsPerDay;

	$('#alertsEmail').prop('checked', emailSetting);
	$('#alertsPhone').prop('checked', textSetting);
	// $('#timeZone').val(timeZoneSetting);
	// $('#routineAnytime').prop('checked', anytime);
	// $('#routineMornings').prop('checked', morning);
	// $('#routineAfternoon').prop('checked', afternoon);
	// $('#routineEvening').prop('checked', evening);
	// $('#alertsPerDay').val(dailyAlerts);
}

